<!DOCTYPE html>
<html>
<head>
  <title>Digraph <%= params[:controller]%></title>

  <%= javascript_include_tag :defaults %>

  <%= stylesheet_link_tag 'ui-lightness/jquery-ui-1.8.7.custom' %>
  <%= stylesheet_link_tag 'scaffold', "mick" %>

  <meta charset="utf-8"
  <%= csrf_meta_tag %>
  <script>
  
  $(function() {
		$( "#edge_source_name" ).autocomplete({
			source: function( request, response ) {
				$.ajax({
					url: "http://digraph.dev/nodes.json",
					dataType: "json",
					data: {						
						term: request.term
					},
					success: function( data ) {
						response( $.map( data, function( item ) {
							return {
								label: item.node.name + " (" + item.node.id + ")",
								value: item.node.name
							}
						}));
					}
				});
			},
			open: function() {
				$( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
			},
			close: function() {
				$( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
			}
		});
	});
	
	
	$(function() {
		$( "#edge_sink_name" ).autocomplete({
			source: function( request, response ) {
				$.ajax({
					url: "http://digraph.dev/nodes.json",
					dataType: "json",
					data: {						
						term: request.term
					},
					success: function( data ) {
						response( $.map( data, function( item ) {
							return {
								label: item.node.name + " (" + item.node.id + ")",
								value: item.node.name
							}
						}));
					}
				});
			},
			open: function() {
				$( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
			},
			close: function() {
				$( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
			}
		});
	});
	</script>
  
  
</head>
<body>

<%= yield %>

</body>
</html>
